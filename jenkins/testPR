pipeline {
    agent any

    environment {
        GO_VERSION = '1.24.0'
    }
    
    tools {
        go "${GO_VERSION}" 
    }

    triggers {
        pollSCM('H/1 * * * *')
    }
    
    options {
        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '5', daysToKeepStr: '', numToKeepStr: '5')
    }

    stages {
        
        stage('Validate & Generate Code') {
            steps {
                sh'go version'
                // script {
                //     githubNotify status: 'PENDING', 
                //                 description: 'Build succeeded',  
                //                 context: 'ci/jenkins/build-status',
                //                 credentialsId: env.GITHUB_CREDENTIALS_ID
                // }
            }
            
        }
    }   

    // test

    post {
        // always {
        //     // cleanWs()
        // }
        success {
            echo 'Gogs build succeeded!'
        }
        failure {
            echo 'Gogs build succeeded!'
        }
    }
}